<div class="container-fluid auth-container">
    <img src="../../../assets/images/r7.jpg" alt="">
    <div class="card auth-card my-5">
        <!-- Logo Section -->
        <div class="real-estate-logo">
            <i class="bi bi-house-door logo-icon"></i>
            <div class="brand-name">RealEstate</div>
            <div class="brand-tagline">Create Your Property Journey</div>
        </div>

        <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
            <!-- User Type Selection -->
            <div class="user-type-selection">
                <div class="user-type-label">I want to:</div>
                <div class="btn-group w-100" role="group">
                    <label class="btn btn-outline-primary" *ngFor="let type of ['buyer', 'seller', 'propertyManager']"
                        [ngClass]="{'selectedType': signupForm.value.userType === type}">
                        <input type="radio" class="btn-check" [id]="type" [value]="type" formControlName="userType">
                        <i class="bi"
                            [ngClass]="{'bi-person-search': type === 'buyer', 'bi-tag': type === 'seller', 'bi-briefcase': type === 'propertyManager'}"></i>
                        {{ type | titlecase }}
                    </label>
                </div>
            </div>

            <div class="form-fields">
                <!-- Name Group -->
                <div class="row g-3 mb-3">
                    <div class="col-md-6" *ngFor="let field of ['firstName','lastName']">
                        <div class="form-floating"> <input type="text" class="form-control" [id]="field"
                                [formControlName]="field" [placeholder]="field"
                                [class.is-invalid]="f[field].errors && f[field].touched"> <label [for]="field"><i
                                    class="bi bi-person me-2"></i>{{ field | titlecase }}</label>
                            <div class="invalid-feedback">{{ getErrorMessage(field) |titlecase }}</div>
                        </div>
                    </div>
                </div>

                <!-- Email -->
                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="email" formControlName="email" placeholder="Email"
                        [class.is-invalid]="f['email'].errors && f['email'].touched">
                    <label for="email"><i class="bi bi-envelope me-2"></i>Email</label>
                    <div class="invalid-feedback">{{ getErrorMessage('email')|titlecase }}</div>
                </div>

                <!-- Contact Group -->
                <div class="row g-3 mb-3">
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select class="form-select" id="gender" formControlName="gender"
                                [class.is-invalid]="f['gender'].errors && f['gender'].touched">
                                <option value="">Select Gender</option>
                                <option *ngFor="let gender of ['male', 'female', 'other']" [value]="gender">{{ gender }}</option>
                            </select>
                            <label for="gender"><i class="bi bi-gender-ambiguous me-2"></i>Gender</label>
                            <div class="invalid-feedback">{{ getErrorMessage('gender')|titlecase }}</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <input type="number" class="form-control" id="age" formControlName="age"
                                placeholder="Age"
                                [class.is-invalid]="f['age'].errors && f['age'].touched"
                                min="18" max="99">
                            <label for="age">Age</label>
                            <div class="invalid-feedback">
                                <ng-container *ngIf="f['age'].hasError('required')">
                                    Age is required.
                                </ng-container>
                                <ng-container *ngIf="f['age'].hasError('min')">
                                    Age must be at least 18.
                                </ng-container>
                                <ng-container *ngIf="f['age'].hasError('max')">
                                    Age cannot exceed 99.
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="form-floating mb-3">
                    <input type="tel" class="form-control" id="phoneNumber" formControlName="phoneNumber"
                        placeholder="Phone Number"
                        [class.is-invalid]="f['phoneNumber'].errors && f['phoneNumber'].touched">
                    <label for="phoneNumber"><i class="bi bi-telephone me-2"></i>Phone Number</label>
                    <div class="invalid-feedback">{{ getErrorMessage('phoneNumber')|titlecase }}</div>
                </div>
                <!-- Password -->
                <div class="form-floating mb-3 position-relative">
                    <input [type]="hidePassword ? 'password' : 'text'" class="form-control" id="password"
                        formControlName="password" placeholder="Password"
                        [class.is-invalid]="f['password'].errors && f['password'].touched">
                    <label for="password"><i class="bi bi-lock me-2"></i>Password</label>
                    <button class="btn btn-link position-absolute end-0 top-50 translate-middle-y pe-3" type="button"
                        (click)="hidePassword = !hidePassword">
                        <i class="bi" [ngClass]="{'bi-eye': hidePassword, 'bi-eye-slash': !hidePassword}"></i>
                    </button>
                    <div class="invalid-feedback">{{ getErrorMessage('password') }}</div>
                </div>
                <!-- <div class="form-floating mb-3 position-relative">
                    <input [type]="hideReEnterPassword ? 'password' : 'text'" class="form-control" id="reEnterPassword"
                        formControlName="reEnterPassword" placeholder="Re Enter Password"
                        [class.is-invalid]="f['reEnterPassword'].errors && f['reEnterPassword'].touched">
                    <label for="reEnterPassword"><i class="bi bi-lock me-2"></i>Re Enter Password</label>
                    <button class="btn btn-link position-absolute end-0 top-50 translate-middle-y pe-3" type="button"
                        (click)="hideReEnterPassword = !hideReEnterPassword">
                        <i class="bi" [ngClass]="{'bi-eye': hideReEnterPassword, 'bi-eye-slash': !hideReEnterPassword}"></i>
                    </button>
                    <div class="invalid-feedback">{{ getErrorMessage('reEnterPassword')|titlecase }}</div>
                </div> -->

                <!-- Address -->
                <div class="form-floating mb-3">
                    <div class="d-flex align-item-center"><i class="bi bi-geo-alt fs-4"></i>
                        <h4 class="pt-1">Address</h4>
                    </div>
                    <div class="row g-4 mb-4">
                        <div class="col-md-4" *ngFor="let addr of ['doorNo', 'street', 'city']">
                            <div class="form-floating">
                                <input type="text" class="form-control" [id]="addr" [formControlName]="addr"
                                    [placeholder]="addr" [class.is-invalid]="f[addr].errors && f[addr].touched">
                                <label [for]="addr">{{ addr | titlecase }}</label>
                            </div>
                            <div class="invalid-feedback">{{ getErrorMessage(addr) |titlecase}}</div>
                        </div>
                    </div>
                    <div class="row g-4 mb-4">
                        <div class="col-md-6" *ngFor="let location of ['district', 'state']">
                            <div class="form-floating">
                                <select [id]="location" [formControlName]="location" class="form-control">
                                    <option value="">Select {{ location | titlecase }}</option>
                                    <option *ngFor="let option of getLocationOptions(location)" [value]="option">{{ option }}</option>
                                </select>
                                <label [for]="location">{{ location | titlecase }}</label>
                            </div>
                            <div class="invalid-feedback">{{ getErrorMessage(location)|titlecase }}</div>
                        </div>
                    </div>
                    <div class="row g-4 mb-4">
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="pinCode" [formControlName]="'pinCode'" placeholder="pinCode" [class.is-invalid]="f['pinCode'].errors && f['pinCode'].touched">
                                <label for="pinCode">Pin Code</label>
                            </div>
                            <div class="invalid-feedback">{{ getErrorMessage('pinCode') |titlecase}}</div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating">
                                <select id="country" [formControlName]="'country'" class="form-control">
                                    <option value="">Select Country</option>
                                    <option *ngFor="let option of getLocationOptions('country')" [value]="option">{{ option }}</option>
                                </select>
                                <label for="country">Country</label>
                            </div>
                            <div class="invalid-feedback">{{ getErrorMessage("country")|titlecase }}</div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary signup-button" [disabled]="signupForm.invalid || loading">
                    <span *ngIf="!loading" >Create Account</span>
                    <div *ngIf="loading" class="spinner-border spinner-border-sm" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </button>

                <!-- <button type="">Submint</button> -->
            </div>
            <!-- Error Message -->
            <div *ngIf="errorMessage" class="alert alert-danger mx-4 mb-4">
                <i class="bi bi-exclamation-circle me-2"></i>{{ errorMessage }}
            </div>
        </form>


        <div class="auth-footer">
            <a routerLink="/login" class="btn btn-link">Already have an account? Sign In</a>
        </div>
    </div>
</div>